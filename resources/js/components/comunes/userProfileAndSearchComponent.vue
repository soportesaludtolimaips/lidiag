<template>
    <ul class="navbar-nav my-lg-0">

        <!-- ============================================================== -->
        <!-- Comment -->
        <!-- ============================================================== -->
        <noscript>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle waves-effect waves-dark" href="" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    <i class="icon-Bell"></i>
                    <div class="notify">
                        <span class="heartbit"></span>
                        <span class="point"></span>
                    </div>
                </a>
                <div class="dropdown-menu dropdown-menu-right mailbox animated bounceInDown">
                    <ul>
                        <li>
                            <div class="drop-title">Notifications</div>
                        </li>
                        <li>
                            <div class="message-center">
                                <!-- Message -->
                                <a href="#">
                                    <div class="btn btn-danger btn-circle">
                                        <i class="fa fa-link"></i>
                                    </div>
                                    <div class="mail-contnet">
                                        <h5>Luanch Admin</h5>
                                        <span class="mail-desc">Just see the my new admin!</span>
                                        <span class="time">9:30 AM</span>
                                    </div>
                                </a>
                                <!-- Message -->
                                <a href="#">
                                    <div class="btn btn-success btn-circle">
                                        <i class="ti-calendar"></i>
                                    </div>
                                    <div class="mail-contnet">
                                        <h5>Event today</h5>
                                        <span class="mail-desc">Just a reminder that you have event</span>
                                        <span class="time">9:10 AM</span>
                                    </div>
                                </a>
                                <!-- Message -->
                                <a href="#">
                                    <div class="btn btn-info btn-circle">
                                        <i class="ti-settings"></i>
                                    </div>
                                    <div class="mail-contnet">
                                        <h5>Settings</h5>
                                        <span class="mail-desc">You can customize this template as you want</span>
                                        <span class="time">9:08 AM</span>
                                    </div>
                                </a>
                                <!-- Message -->
                                <a href="#">
                                    <div class="btn btn-primary btn-circle">
                                        <i class="ti-user"></i>
                                    </div>
                                    <div class="mail-contnet">
                                        <h5>Pavan kumar</h5>
                                        <span class="mail-desc">Just see the my admin!</span>
                                        <span class="time">9:02 AM</span>
                                    </div>
                                </a>
                            </div>
                        </li>
                        <li>
                            <a class="nav-link text-center" href="javascript:void(0);">
                                <strong>Check all notifications</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
        </noscript>
        <!-- ============================================================== -->
        <!-- End Comment -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Messages -->
        <!-- ============================================================== -->
        <noscript>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle waves-effect waves-dark" href="" id="2" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    <i class="icon-Mail"></i>
                    <div class="notify">
                        <span class="heartbit"></span>
                        <span class="point"></span>
                    </div>
                </a>
                <div class="dropdown-menu mailbox dropdown-menu-right animated bounceInDown" aria-labelledby="2">
                    <ul>
                        <li>
                            <div class="drop-title">You have 4 new messages</div>
                        </li>
                        <li>
                            <div class="message-center">
                                <!-- Message -->
                                <a href="#">
                                    <div class="user-img">
                                        <img src="/admin-wrap/assets/images/users/1.jpg" alt="user" class="img-circle">
                                        <span class="profile-status online pull-right"></span>
                                    </div>
                                    <div class="mail-contnet">
                                        <h5>Pavan kumar</h5>
                                        <span class="mail-desc">Just see the my admin!</span>
                                        <span class="time">9:30 AM</span>
                                    </div>
                                </a>
                                <!-- Message -->
                                <a href="#">
                                    <div class="user-img">
                                        <img src="/admin-wrap/assets/images/users/2.jpg" alt="user" class="img-circle">
                                        <span class="profile-status busy pull-right"></span>
                                    </div>
                                    <div class="mail-contnet">
                                        <h5>Sonu Nigam</h5>
                                        <span class="mail-desc">I've sung a song! See you at</span>
                                        <span class="time">9:10 AM</span>
                                    </div>
                                </a>
                                <!-- Message -->
                                <a href="#">
                                    <div class="user-img">
                                        <img src="/admin-wrap/assets/images/users/3.jpg" alt="user" class="img-circle">
                                        <span class="profile-status away pull-right"></span>
                                    </div>
                                    <div class="mail-contnet">
                                        <h5>Arijit Sinh</h5> <span class="mail-desc">I am a singer!</span>
                                        <span class="time">9:08 AM</span>
                                    </div>
                                </a>
                                <!-- Message -->
                                <a href="#">
                                    <div class="user-img">
                                        <img src="/admin-wrap/assets/images/users/4.jpg" alt="user" class="img-circle">
                                        <span class="profile-status offline pull-right"></span>
                                    </div>
                                    <div class="mail-contnet">
                                        <h5>Pavan kumar</h5>
                                        <span class="mail-desc">Just see the my admin!</span> <span class="time">9:02
                                            AM</span>
                                    </div>
                                </a>
                            </div>
                        </li>
                        <li>
                            <a class="nav-link text-center" href="javascript:void(0);">
                                <strong>See all e-Mails</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
        </noscript>
        <!-- ============================================================== -->
        <!-- End Messages -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- mega menu -->
        <!-- ============================================================== -->
        <li class="nav-item dropdown mega-dropdown">
            <a class="nav-link dropdown-toggle waves-effect waves-dark" href="" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                <i class="icon-Box-Close"></i></a>
            <div class="dropdown-menu animated bounceInDown">
                <ul class="mega-dropdown-menu row">


                    <li class="col-lg-3  m-b-30">
                        <h4 class="m-b-20">Sedes</h4>
                        <!-- Contact -->
                        <form>
                            <div class="form-group">
                                <select class="form-control custom-select" @change="estableserSede()"
                                    style="width: 100%; height: 36px" v-model="sedeSeleccionada">
                                    <option>Seleccione la sede</option>
                                    <option v-for="ItemSede in sedes" v-bind:key="ItemSede" v-bind:value="ItemSede.id">
                                        {{ ItemSede.nom_sede }}
                                    </option>
                                </select>
                            </div>
                            <!-- <div class="form-group">
                                <input type="email" class="form-control" placeholder="Enter email">
                            </div>
                            <div class="form-group">
                                <textarea class="form-control" id="exampleTextarea" rows="3"
                                    placeholder="Message"></textarea>
                            </div> -->
                        </form>
                    </li>
                </ul>
            </div>
        </li>
        <!-- ============================================================== -->
        <!-- End mega menu -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Language -->
        <!-- ============================================================== -->
        <!-- <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle waves-effect waves-dark" href="" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                <i class="flag-icon flag-icon-us"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-right animated bounceInDown">
                <a class="dropdown-item" href="#">
                    <i class="flag-icon flag-icon-in"></i> India
                </a>
                <a class="dropdown-item" href="#">
                    <i class="flag-icon flag-icon-fr"></i> French</a>
                <a class="dropdown-item" href="#">
                    <i class="flag-icon flag-icon-cn"></i> China</a>
                <a class="dropdown-item" href="#">
                    <i class="flag-icon flag-icon-de"></i> Dutch
                </a>
            </div>
        </li> -->
        <!-- ============================================================== -->
        <!-- Profile -->
        <!-- ============================================================== -->
        <li class="nav-item dropdown u-pro">
            <a class="nav-link dropdown-toggle waves-effect waves-dark profile-pic" href="" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                <img src="/admin-wrap/assets/images/users/1.jpg" alt="user" class="" />
                <span class="hidden-md-down"> &nbsp; {{ usuarioactual.name }}
                    <i class="fa fa-angle-down"></i>
                </span>
            </a>
            <div class="dropdown-menu dropdown-menu-right animated flipInY">
                <ul class="dropdown-user">
                    <li>
                        <div class="dw-user-box">
                            <div class="u-img">
                                <img src="/admin-wrap/assets/images/users/1.jpg" alt="user">
                            </div>
                            <div class="u-text">
                                <h4>{{ usuarioactual.name }}</h4>
                                <p class="text-muted">{{ usuarioactual.email }}</p>
                                <!-- <router-link class="btn btn-rounded btn-danger btn-sm" :to="{
                                    name: 'seguridad.usuario.perfil', params: { id: usuarioactual.id }
                                }">
                                    Ver Perfil
                                </router-link> -->
                            </div>
                        </div>
                    </li>
                    <li role="separator" class="divider"></li>
                    <li>
                        <a href="#">
                            <i class="ti-user"></i> Mi Perfil
                        </a>
                    </li>
                    <li role="separator" class="divider"></li>
                    <li>
                        <a href="#">
                            <i class="ti-settings"></i> Configuración de cuenta
                        </a>
                    </li>
                    <li role="separator" class="divider"></li>
                    <li>
                        <a href="#" @click.prevent="Logout">
                            <i class="fa fa-power-off"></i> Salir
                        </a>
                    </li>
                </ul>
            </div>
        </li>
    </ul>
</template >
<script>
export default {
    props: ['ruta', 'usuarioactual'],
    mounted() {
        this.listarSedes();
        this.estableserSede();
    },
    data() {
        return {
            sedes: [], //Listo las sedes
            sedeSeleccionada: 1,
        }
    },
    methods: {
        Logout() {
            axios.post('/autenticacion/logout').then(res => {
                if (res.data.code == 204) {
                    this.$router.push({ name: 'login' })
                    location.reload();
                }
            });
        },
        async listarSedes() {
            try {
                const res = await axios.get('/config-sedes');
                this.sedes = res.data;
            } catch (error) {
                console.log(error);
            }
        },
        estableserSede() {

            this.sedeSeleccionada = sessionStorage.getItem('ST-sede');

            if (this.sedeSeleccionada === 0 || this.sedeSeleccionada == null) {
                sessionStorage.setItem('ST-sede', 1);
                this.sedeSeleccionada = sessionStorage.getItem('ST-sede');
            } else {
                this.sedeSeleccionada = sessionStorage.getItem('ST-sede');
            }

            this.emitter.emit("sedeSeleccionada", { msg: this.sedeSeleccionada });
        }
    }
}
</script>